doctype html
html(lang="en")
    head
        title PayLabs Demo
        style.
            body { font-family: sans-serif; padding: 50px; text-align: center; }
            .btn { padding: 15px 30px; background: #a50064; color: white; border: none; cursor: pointer; font-size: 16px; border-radius: 5px; }
            .btn:hover { background: #c7007e; }
    body
        h1 Thanh Toán
        p(style="margin-bottom: 20px") Sản phẩm: Gói VIP Pro - 50,000đ

        button.btn(onclick="handlePayment()") Thanh toán ngay

        script.
            async function handlePayment() {
                try {
                    const payload = {
                        amount: 50000,
                        orderId: 'DH_' + new Date().getTime()
                    };

                    const response = await fetch('/payment/checkout', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(payload)
                    });

                    const data = await response.json();


                    console.log('Response from API:', data);


                    if (data && data.payUrl) {
                        window.location.href = data.payUrl;
                    } else {
                        alert('Lỗi: Không lấy được link thanh toán!');
                        console.error(data);
                    }

                } catch (error) {
                    console.error('Lỗi call API:', error);
                    alert('Có lỗi xảy ra, check console đi ní ơi.');
                }
            }
